## 2021年自研数据库的机遇与思考(上)


### 01
除了我们耳熟能详的Oracle，MySQL,SQLServer还有很多，但这也只是目前现存数据库的冰山一角。<br/>
![image](https://github.com/cuipengdba/pger/blob/main/tree/202102/20210222_01_pic_001.png)<br/>
这些数据库大致可以划分为三类：<br/>
一类是关系型数据库<br/>
一类是非关系型数据库<br/>
还有一类是比较暧昧的骑墙派，只为了解决某种具体问题，在关系与非关系左右逢源的类别。<br/>

面向未来，就要知道数据库的历史和发展。想要了解数据库，首先要知道“数据”这回事。<br/>

第一个要谈到的问题是数据模型。<br/>
什么是数据模型？<br/>
数据模型是现实世界数据特征的抽象，用于描述一组数据的概念和定义。<br/>
现实世界 -> 信息世界(概念模型) -> 计算机世界(数据模型)<br/>

1687年，艾萨克牛顿发表了论文《自然定律》，在那著名的三大定律被发现以前，物理世界一片混沌，虽然我们生活在其中但仍然没办法解释各种现象。<br/>
三大定律就是对各种物理特征的抽象。<br/>

在亚当斯密出版《国富论》以前，对于经济是如何发展的、为什么有穷国和富国、怎么做才能发展的更快，所有这些问题也都是混沌的。<br/>
这本书就是对社会上各种经济活动的抽象。<br/>

当存在大量的数据，而没有一个数据模型对数据特征进行抽象的时候，数据也是混沌的。计算机如何存储和表示数据之间的关系，在此之前一片混沌。<br/>
直到1970年，科德发表了题为”大型共享数据库的关系模型“的论文，才终于有了一个抓手。<br/>

他说到：未来的数据库系统要能够做到“对称探索”，即用户可以根据任何已知的属性组合去探索剩下的未知属性。不依赖索引，也能进行数据的查询。<br/>

这就是关系模型的开始。<br/>

### 02
对于本质的探求，让我思考了另一个问题，为什么是关系模型而不是其他模型？关系模型的出现到底是技术的选择，还是现实需求的选择？<br/>

世界上大部分的技术都是为需求服务的，再高深的技术如果找不到商业的价值，也没办法转化为产品，最终得到传播和发展。<br/>

![image](https://github.com/cuipengdba/pger/blob/main/tree/202102/20210222_01_pic_002.png)<br/>
数据库就是规范化和聚合这两者之间不断权衡和发展的结果。<br/>

1979年，Oralce基于科德的关系模型理论，发布了第一代关系数据库产品。这个时候能够使用Oracle数据库产品的是电信、银行、能源等大型的企业。<br/>

他们使用数据库的目的就是要将数据有效的存储起来，并能够及时的查询。他们对数据库首要追求的目标是规范化，关系型数据库满足了需求，并在其后长达几十年的时间里有了高速的发展。<br/>

时间来到了1994年，web 1.0时代来了。1995年，马云的中国黄页也上线了。<br/>
这个时候对于数据库的应用稍微有了一点微妙的不同，就像明明已经有了QQ，在开发个移动版不行吗？为什么一定要有个微信？<br/>
因为QQ太重了，具体重在哪儿我也不是很清楚。<br/>

历史总是相似的，在1996年的时候，MySQL发布了 1.0版本，她以轻便、小巧、廉价的姿态迅速发展。<br/>
这时候仍然是MySQL和Oracle等关系型数据库的天下。<br/>

时间继续又来到了2002年，这一年被认为是web 1.0 与 web 2.0的分水岭。<br/>
什么是web 1.0，什么又是web2.0呢？<br/>
在web 1.0的时代，是企业搭设网站，用户只能够进行浏览和查询，用户基本上是不产生数据的。<br/>
在web 2.0的时代，变成了企业搭设一个平台，企业和用户共同产生数据，这时候数据的种类开始变得原来越丰富、数据量也开始变得越来越大。<br/>

随着数据类型的丰富、数据量的增长、各种互联网产品的不断涌现，如何处理非结构化的日志、视频、图像等数据的问题开始凸显。<br/>

NoSQL(Not only SQL)慢慢的开始火爆起来，作为处理规范化数据的关系型数据库的补充，NoSQL数据库得到了快速的发展，到了锣鼓喧天、百花齐放的程度。<br/>
但是直到今天，没有那个产品一统江湖。。。<br/>
毕竟世界对数据的态度，还是需要点规矩的。处理非规范化数据大多针对个性化的需求，场景和需求各异很难有一统江湖的产品出现。<br/>

### 03
在计算机发展的很长一段时间里，计算机每年都会因处理器速度的提高而变得更快。在不对其代码进行任何更改的情况下，应用程序的运行速度也会变得更快。<br/>

大部分应用程序只被设计为在单个处理器上运行。随着时间的推移，这些应用程序也促使了处理器速度的提高，并要求支持更多的计算量和处理更大的数据量。<br/>

不幸的是，这种硬件发展趋势在2005年左右停止了：由于硬盘散热的限制，硬件开发人员停止了制造更快单个处理器的思路，并转向为增加更多的相同计算能力的并行CPU计算核心。<br/>

这种变化意味着需要修改应用程序以支持并行计算，以便更快运行。<br/>

虽然在2005年处理器性能的增速减慢了，但是数据存储和数据采集技术的发展并没有减慢。<br/>
存储1TB数据的成本每14个月继续下降两次，对于各种规模的企业来说，这意味着存储大量数据的成本非常便宜。<br/>

海量数据库的增长和服务器、软件昂贵的价格之间的矛盾越来越凸显。基于廉价服务器上的进行大数据处理变得迫在眉睫。<br/>

2005年，Google发表了三篇论文，Google FS、MapReduece、BigTable，开启了真正的大数据时代。<br/>

随着开源软件的丰富，分布式框架的发展，原来只能纵向发展，追求更强劲的单机处理能力，现在已经不是那么必须。<br/>

IT业界逐渐摆脱了昂贵的服务器、储存以及软件的束缚。<br/>

Oracle在数据库的集群和分布式上并没有明显的作为，又错过了云计算，逐渐失去了其数据库领域霸主的地位。<br/>

2009年阿里巴巴透漏将实施“IOE”战略。(昂贵三大件，IBM的服务器、Oralce数据库、EMC的存储)<br/>
Facebook，Google等互联网企业也转向MySQL。<br/>

2019年，Oracle宣布在中国区裁员900人，亚马逊宣布在2020年以前，全面下线Oracle。<br/>

### 04
互联网骨灰级大咖Tim O'Reilly在2002年早期拜访了贝索斯，希望跟亚马逊谈个合作。虽然合作没谈成，但这次拜访让贝索斯他意识到亚马逊的数据是可以开放出来让第三方程序员来使用。<br/>

他逐渐的把IT基础设施分化到最小的原子单元，让大家可以自由的选择和调配，当时的亚马逊从上至下已经在往一个朦胧的大方向努力，但是他们并不知道这叫做云计算。<br/>

4年之后的2006年，亚马逊推出了弹性云计算服务。<br/>
根据著名的IT调研机构Gartner的预测，2019年云计算市场将达到2060亿美元的惊人规模。<br/>

贝佐斯谈到云计算的时候说道：“我所知道的最好的比喻就是电网，假设你回到100年前的过去，如果你想要使用电，就必须建立自己的小发电厂，而许多工厂确实这么干了。<br/>

但是当电网一出现，他们就立刻抛弃了自己的发电厂，开始购买电网的电力。我这个类比只是想让大家更明白。这就是计算基础设施正在发生的事。”<br/>
![image](https://github.com/cuipengdba/pger/blob/main/tree/202102/20210222_01_pic_003.png)<br/>

在未来，数据库的应用场景大概有三种。<br/>

在云上部署的应用，数据库变成了基础设施。<br/>

不适合上云的大企业、政府机构，通常会选择外购或者自研分布式数据库，比如工商银行正在自研MySQL分布式数据库。<br/>

不适合上云的中小企业、政府机构，会倾向于选择MySQL、PostgreSQL、以及基于PostgreSQL基础上的国产数据库。<br/>

数据库逐渐成为基础服务、从前的大量商业数据库逐渐式微，各类基于开源数据库基础之上的国产数据库开始崛起。<br/>

这些数据库的首批客户就是那些不适合上云的中小企业；<br/>
在自动化运维、集群化、分布式等方面有一定积累后，逐渐向不适合上云的大企业渗透。<br/>
